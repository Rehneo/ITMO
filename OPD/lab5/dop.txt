ORG 0x100
STONE:		WORD	0x18, 0x3C, 0x7E, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x7E, 0x3C, 0x18

ORG 0x200
PAPER:		WORD	0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF

ORG 0x300
SCISSORS:		WORD	0x81, 0xC3,0x42,0x66,0x66,3C,0x18,0x24,0x42,0x81


ORG 0x4A0
STONE_START:		WORD	0x100
PAPER_START: 	WORD	0x200
SCISSORS_START: 	WORD	0x300
SEQUENCE:	WORD	0xAB
RANDOMS:	WORD	0xAB
SEQUENCE_PREV: WORD 	0xAF
MASK:	WORD	0x0003

START_RANDOM:	LD RANDOMS
		AND MASK
		BEQ SCISSORS_CASE
		CMP #0x03
		BEQ NOTEXPECTED_CASE
		CMP #0x02
		BEQ STONE_CASE
		CMP #0x01
		BEQ PAPER_CASE

NOTEXPECTED_CASE:	LD SEQUENCE
		ADD SEQUENCE_PREV
		ST RANDOMS
		ROR
		JUMP START_RANDOM
		
STONE_CASE:
		LD STONE_START
		ST (SP+1)
		RET
PAPER_CASE:		
		LD PAPER_START
		ST (SP+1)
		RET
SCISSORS_CASE:
		LD SCISSORS_START
		ST (SP + 1)
		RET


ORG 0x500
SEED:	WORD	0xAB
CURRENT_POS:	WORD	0x100
COUNTER:		WORD	0xC
START:			CLA
SEED_REQUEST:		IN 5
			AND #0x40
			BEQ SEED_REQUEST
			IN 4
			ST SEED
REQUEST:			LD RANDOMS
			ADD SEED
			ADD #0x03;
			ST RANDOMS
			IN 5
			AND #0x40
			BEQ REQUEST
			IN 4
			CALL START_RANDOM
			POP
			ST CURRENT_POS
WRITE:			IN 0x11	
			AND #0x40
			BEQ WRITE
			LD (CURRENT_POS)+ 
			OUT 0x10
			LOOP COUNTER
			JUMP WRITE
			LD COUNTER
			ADD #0xC
			ST COUNTER
			JUMP REQUEST

			
		